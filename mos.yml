author: mongoose-os
description: A demo Mongoose OS firmware for C/C++
version: 1.0
arch: esp32

libs_version: ${mos.version}
modules_version: ${mos.version}
mongoose_os_version: ${mos.version}

tags:
  - c

sources:
  - src

filesystem:
  - fs

config_schema:
  - ["debug.level", "i", 3, { title: "Log level 0..error - 3..debug" }]
  - ["dht.pin", "i", 23, { title: "DHT 11 GPIO PIN" }]
  - ["mhz19c.hd.pin", "i", 21, { title: "MH-Z19c HD GPIO PIN" }]
  - ["button.pin", "i", 0, { title: "Boot Button GPIO PIN" }]
  - ["wifi.sta.ssid", "s", "technical", { title: "Primary Wifi AP" }]
  - ["wifi.sta.pass", "s", "12345678901234567890", { title: "Primary Wifi AP" }]
  - ["wifi.sta.dhcp_hostname", "s", "miefalarm", { title: "Primary Wifi AP" }]
  - ["wifi.sta.enable", "b", true, { title: "Primary Wifi AP" }]

includes:
  - libs

libs:
  - origin: https://github.com/mongoose-os-libs/boards
  - origin: https://github.com/mongoose-os-libs/core
  - origin: https://github.com/mongoose-os-libs/dht
  - origin: https://github.com/mongoose-os-libs/ca-bundle
  - origin: https://github.com/mongoose-os-libs/http-server
  - origin: https://github.com/mongoose-os-libs/wifi
  - origin: https://github.com/mongoose-os-libs/rpc-uart
  - origin: https://github.com/mongoose-os-libs/rpc-service-fs
  - origin: https://github.com/mongoose-os-libs/rpc-service-config
  - origin: https://github.com/mongoose-os-libs/rpc-service-wifi
  #- origin: https://github.com/mongoose-os-libs/fstab
  #- origin: https://github.com/mongoose-os-libs/vfs-fs-lfs

cdefs:
  MGOS_ENABLE_WEB_CONFIG: 1
  MGOS_ENABLE_FILE_UPLOAD: 1

cflags:
  - "-Wimplicit-fallthrough=0"

#conds:
  #- when: mos.platform == "esp32"
  #  apply:
  #    build_vars:
  #      ESP_IDF_SDKCONFIG_OPTS: >
  #        ${build_vars.ESP_IDF_SDKCONFIG_OPTS}
  #        CONFIG_FREERTOS_UNICORE=y
  #- when: mos.platform == "esp32"
  #  apply:
  #    build_vars: # Add these
  #      ESP_IDF_EXTRA_PARTITION: fs_ext,data,spiffs,,256K # two lines

# Used by the mos tool to catch mos binaries incompatible with this file format
manifest_version: 2017-05-18
